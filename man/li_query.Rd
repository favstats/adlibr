% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/liads.R
\name{li_query}
\alias{li_query}
\title{Query the LinkedIn Ad Library with Automatic Pagination}
\usage{
li_query(
  keyword = NULL,
  advertiser = NULL,
  countries = NULL,
  start_date = NULL,
  end_date = NULL,
  count = 25,
  max_pages = Inf,
  linkedin_api_version = "202409",
  verbose = TRUE
)
}
\arguments{
\item{keyword}{A string of one or more space-separated keywords to search in ad content.
Multiple keywords are treated with logical AND operation. Optional.}

\item{advertiser}{A string containing the name of the advertiser to filter by. Optional.}

\item{countries}{A character vector of 2-letter ISO country codes (e.g., c("us", "gb", "de")).
Case insensitive. Optional.}

\item{start_date}{The start date for the ad search range (inclusive). Can be a Date object
or "YYYY-MM-DD" string. Optional.}

\item{end_date}{The end date for the ad search range (exclusive). Can be a Date object
or "YYYY-MM-DD" string. Optional.}

\item{count}{The number of ads to return per page. Maximum is 25 (API limitation).
Defaults to 25.}

\item{max_pages}{The maximum number of pages to retrieve. Set to control API usage.
Defaults to \code{Inf} (retrieve all available pages).}

\item{linkedin_api_version}{The LinkedIn API version to use. Defaults to "202409".
Should not normally need to be changed.}

\item{verbose}{Logical. If TRUE, provides detailed progress output during execution.
Defaults to TRUE.}
}
\value{
A \code{tibble} containing the ad data with the following columns:
\describe{
\item{ad_url}{Direct URL to the ad preview page}
\item{is_restricted}{Boolean indicating if ad violates LinkedIn policies}
\item{restriction_details}{Details about policy violations (if any)}
\item{advertiser_name}{Name of the advertising organization}
\item{advertiser_url}{LinkedIn page URL of the advertiser}
\item{ad_payer}{Entity that paid for the advertisement}
\item{ad_type}{Format/type of the advertisement (e.g., "SPOTLIGHT_V2")}
\item{first_impression_at}{First time the ad was shown (POSIXct)}
\item{latest_impression_at}{Most recent time the ad was shown (POSIXct)}
\item{total_impressions_from}{Lower bound of total impressions}
\item{total_impressions_to}{Upper bound of total impressions}
\item{impressions_by_country}{List-column with country-wise impression data}
\item{ad_targeting}{List-column with detailed targeting criteria}
}
}
\description{
This function queries the LinkedIn Ad Library API based on specified criteria.
It automatically handles pagination to retrieve all available results up to the
specified \code{max_pages} limit. Supports all official API parameters including
keyword search, advertiser filtering, country targeting, and date ranges.
}
\section{Authentication}{

Requires prior authentication using \code{\link{li_auth_configure}} and \code{\link{li_auth}}.
The function automatically uses cached OAuth tokens.
}

\section{Rate Limits}{

The LinkedIn API limits responses to 25 ads per request. Use the \code{max_pages} parameter
to control the total number of API calls. Large queries may take time to complete.
}

\section{API Reference}{

Based on the LinkedIn Ad Library API: \url{https://www.linkedin.com/ad-library/api/ads}
}

\examples{
\dontrun{
# First, authenticate:
# li_auth()
# readRenviron(".Renviron") # Run this after authenticating

# Example 1: Search for ads by keyword and country

# Example 2: Search for ads by a specific advertiser, limiting to 2 pages
}
}
